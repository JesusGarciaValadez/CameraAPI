<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Camera API</title>
</head>
<body>
  <div class="container">
    <h1>Camera API</h1>
    <section class="main-content">
      <input type="file" accept="image/*" id="take-picture">
      <h2>Preview</h2>
      <p><img src="about:blank" alt="" id="show-picture"></p>
      <p id="error"></p>
    </section>
  </div>

  <script>
    ( function () {
      var takePicture = document.querySelector( "#take-picture" ),
          showPicture = document.querySelector( "#show-picture" );

      if ( takePicture && showPicture ) {
        // Establecer eventos
        takePicture.onchange  = function ( event ) {
          // Obtener una referencia a la fotografía tomada o fichero
          var files   = event.target.files,
              file;

          if ( files && files.length > 0 ) {
            file = files[ 0 ];

            try {
              // Crear ObjectURL
              var imgURL  = window.URL.createObjectURL( file );

              // Establecer ObjectURL como img src
              showPicture.src   = imgURL;

              // Revocar ObjectURL
              URL.revokeObjectURL( imgURL );
            } catch ( exception ) {
              try {
                // Regresar a FileReader si createObjectURL no está disponible
                var fileReader    = new fileReader();
                fileReader.onload = function ( event ) {
                  showPicture.src = event.target.result;
                };

                fileReader.readAsDataURL( file );
              } catch ( exception ) {
                var error = document.querySelector( "#error" );

                if ( error ) {
                  error.innerHTML = "Neither createObjectURL or FileReader are supported";
                }
              }
            }
          }
        }
      }
    } )();
  </script>
</body>
</html>